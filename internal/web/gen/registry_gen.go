// Code generated by framework/cmd/approutegen. DO NOT EDIT.
package gen

import (
	"blog/framework"
	"blog/framework/router"
	"blog/internal/web/appcore"
	r_layout_author_param_slug "blog/internal/web/gen/r_layout_author_param_slug"
	r_layout_root "blog/internal/web/gen/r_layout_root"
	r_not_found_root "blog/internal/web/gen/r_not_found_root"
	r_page_author_param_slug "blog/internal/web/gen/r_page_author_param_slug"
	r_page_channels "blog/internal/web/gen/r_page_channels"
	r_page_micro_tales "blog/internal/web/gen/r_page_micro_tales"
	r_page_note_param_slug "blog/internal/web/gen/r_page_note_param_slug"
	r_page_root "blog/internal/web/gen/r_page_root"
	r_page_tag_param_slug "blog/internal/web/gen/r_page_tag_param_slug"
	r_page_tales "blog/internal/web/gen/r_page_tales"
	route_resolvers "blog/internal/web/resolvers"
	"context"
	"github.com/a-h/templ"
	"net/http"
	"strings"
)

type RouteResolvers = route_resolvers.RouteResolver

type RootParams = route_resolvers.RootParams
type AuthorParamSlugParams = route_resolvers.AuthorParamSlugParams
type ChannelsParams = route_resolvers.ChannelsParams
type MicroTalesParams = route_resolvers.MicroTalesParams
type NoteParamSlugParams = route_resolvers.NoteParamSlugParams
type TagParamSlugParams = route_resolvers.TagParamSlugParams
type TalesParams = route_resolvers.TalesParams

func NewRouteResolvers() RouteResolvers {
	return &route_resolvers.Resolver{}
}

func Handlers(resolvers RouteResolvers) []framework.RouteHandler[*appcore.Context] {
	return []framework.RouteHandler[*appcore.Context]{
		framework.PageOnlyRouteHandler[*appcore.Context, RootParams, appcore.NotesPageView]{
			Page: framework.PageModule[*appcore.Context, RootParams, appcore.NotesPageView]{
				Pattern:     "/",
				ParseParams: parseRootParams,
				Load: func(ctx context.Context, appCtx *appcore.Context, r *http.Request, params RootParams) (appcore.NotesPageView, error) {
					return resolvers.ResolveRootPage(ctx, appCtx, r, params)
				},
				Render: r_page_root.Page,
				Layouts: []framework.LayoutRenderer[appcore.NotesPageView]{
					wrapRootWithRootLayout,
				},
			},
		},
		framework.PageOnlyRouteHandler[*appcore.Context, AuthorParamSlugParams, appcore.AuthorPageView]{
			Page: framework.PageModule[*appcore.Context, AuthorParamSlugParams, appcore.AuthorPageView]{
				Pattern:     "/author/[slug]",
				ParseParams: parseAuthorParamSlugParams,
				Load: func(ctx context.Context, appCtx *appcore.Context, r *http.Request, params AuthorParamSlugParams) (appcore.AuthorPageView, error) {
					return resolvers.ResolveAuthorParamSlugPage(ctx, appCtx, r, params)
				},
				Render: r_page_author_param_slug.Page,
				Layouts: []framework.LayoutRenderer[appcore.AuthorPageView]{
					wrapAuthorParamSlugWithRootLayout,
					wrapAuthorParamSlugWithAuthorParamSlugLayout,
				},
			},
		},
		framework.PageOnlyRouteHandler[*appcore.Context, ChannelsParams, appcore.NotesPageView]{
			Page: framework.PageModule[*appcore.Context, ChannelsParams, appcore.NotesPageView]{
				Pattern:     "/channels",
				ParseParams: parseChannelsParams,
				Load: func(ctx context.Context, appCtx *appcore.Context, r *http.Request, params ChannelsParams) (appcore.NotesPageView, error) {
					return resolvers.ResolveChannelsPage(ctx, appCtx, r, params)
				},
				Render: r_page_channels.Page,
				Layouts: []framework.LayoutRenderer[appcore.NotesPageView]{
					wrapChannelsWithRootLayout,
				},
			},
		},
		framework.PageOnlyRouteHandler[*appcore.Context, MicroTalesParams, appcore.NotesPageView]{
			Page: framework.PageModule[*appcore.Context, MicroTalesParams, appcore.NotesPageView]{
				Pattern:     "/micro-tales",
				ParseParams: parseMicroTalesParams,
				Load: func(ctx context.Context, appCtx *appcore.Context, r *http.Request, params MicroTalesParams) (appcore.NotesPageView, error) {
					return resolvers.ResolveMicroTalesPage(ctx, appCtx, r, params)
				},
				Render: r_page_micro_tales.Page,
				Layouts: []framework.LayoutRenderer[appcore.NotesPageView]{
					wrapMicroTalesWithRootLayout,
				},
			},
		},
		framework.PageOnlyRouteHandler[*appcore.Context, NoteParamSlugParams, appcore.NotePageView]{
			Page: framework.PageModule[*appcore.Context, NoteParamSlugParams, appcore.NotePageView]{
				Pattern:     "/note/[slug]",
				ParseParams: parseNoteParamSlugParams,
				Load: func(ctx context.Context, appCtx *appcore.Context, r *http.Request, params NoteParamSlugParams) (appcore.NotePageView, error) {
					return resolvers.ResolveNoteParamSlugPage(ctx, appCtx, r, params)
				},
				Render: r_page_note_param_slug.Page,
				Layouts: []framework.LayoutRenderer[appcore.NotePageView]{
					wrapNoteParamSlugWithRootLayout,
				},
			},
		},
		framework.PageOnlyRouteHandler[*appcore.Context, TagParamSlugParams, appcore.NotesPageView]{
			Page: framework.PageModule[*appcore.Context, TagParamSlugParams, appcore.NotesPageView]{
				Pattern:     "/tag/[slug]",
				ParseParams: parseTagParamSlugParams,
				Load: func(ctx context.Context, appCtx *appcore.Context, r *http.Request, params TagParamSlugParams) (appcore.NotesPageView, error) {
					return resolvers.ResolveTagParamSlugPage(ctx, appCtx, r, params)
				},
				Render: r_page_tag_param_slug.Page,
				Layouts: []framework.LayoutRenderer[appcore.NotesPageView]{
					wrapTagParamSlugWithRootLayout,
				},
			},
		},
		framework.PageOnlyRouteHandler[*appcore.Context, TalesParams, appcore.NotesPageView]{
			Page: framework.PageModule[*appcore.Context, TalesParams, appcore.NotesPageView]{
				Pattern:     "/tales",
				ParseParams: parseTalesParams,
				Load: func(ctx context.Context, appCtx *appcore.Context, r *http.Request, params TalesParams) (appcore.NotesPageView, error) {
					return resolvers.ResolveTalesPage(ctx, appCtx, r, params)
				},
				Render: r_page_tales.Page,
				Layouts: []framework.LayoutRenderer[appcore.NotesPageView]{
					wrapTalesWithRootLayout,
				},
			},
		},
	}
}

func NotFoundPage(notFound framework.NotFoundContext) templ.Component {
	pathValue := strings.TrimSpace(notFound.RequestPath)
	if pathValue == "" {
		pathValue = "/"
	}
	routeID := nearestNotFoundRouteID(notFound)
	view := appcore.NewNotFoundLayoutView()
	switch routeID {
	default:
		component := r_not_found_root.Page(pathValue)
		component = r_layout_root.Layout(view, component)
		return component
	}
}

func nearestNotFoundRouteID(notFound framework.NotFoundContext) string {
	for _, candidate := range candidateRouteIDsFromPattern(notFound.MatchedRoutePattern) {
		if routeID, ok := resolveNotFoundCandidateRouteID(candidate); ok {
			return routeID
		}
	}
	for _, candidate := range candidateRouteIDsFromPath(notFound.RequestPath) {
		if routeID, ok := resolveNotFoundCandidateRouteID(candidate); ok {
			return routeID
		}
	}
	return ""
}

func resolveNotFoundCandidateRouteID(candidate string) (string, bool) {
	if hasNotFoundTemplate(candidate) {
		return candidate, true
	}
	if candidate == "" {
		return "", false
	}
	routeID, ok := matchDynamicNotFoundTemplate(candidate)
	if !ok {
		return "", false
	}
	return routeID, true
}

func matchDynamicNotFoundTemplate(candidate string) (string, bool) {
	if candidate == "" {
		return "", false
	}
	return "", false
}

func hasNotFoundTemplate(routeID string) bool {
	switch routeID {
	case "":
		return true
	default:
		return false
	}
}

func candidateRouteIDsFromPattern(pattern string) []string {
	routeID := normalizePatternRouteID(pattern)
	return routeAncestry(routeID)
}

func candidateRouteIDsFromPath(requestPath string) []string {
	routeID := normalizeRequestRouteID(requestPath)
	return routeAncestry(routeID)
}

func normalizePatternRouteID(pattern string) string {
	routeID := strings.TrimSpace(pattern)
	routeID = strings.Trim(routeID, "/")
	return routeID
}

func normalizeRequestRouteID(requestPath string) string {
	routeID := strings.TrimSpace(requestPath)
	routeID = strings.Trim(routeID, "/")
	return routeID
}

func routeAncestry(routeID string) []string {
	routeID = strings.TrimSpace(routeID)
	routeID = strings.Trim(routeID, "/")
	if routeID == "" {
		return []string{""}
	}
	parts := strings.Split(routeID, "/")
	out := make([]string, 0, len(parts)+1)
	for idx := len(parts); idx >= 1; idx-- {
		out = append(out, strings.Join(parts[:idx], "/"))
	}
	out = append(out, "")
	return out
}

func parseRootParams(requestPath string) (RootParams, bool) {
	_, ok := router.MatchPathPattern("/", requestPath)
	if !ok {
		return RootParams{}, false
	}
	return RootParams{}, true
}

func parseAuthorParamSlugParams(requestPath string) (AuthorParamSlugParams, bool) {
	params, ok := router.MatchPathPattern("/author/[slug]", requestPath)
	if !ok {
		return AuthorParamSlugParams{}, false
	}
	out := AuthorParamSlugParams{}
	SlugValue := strings.TrimSpace(params["slug"])
	if !router.IsValidSlug(SlugValue) {
		return AuthorParamSlugParams{}, false
	}
	out.Slug = SlugValue
	return out, true
}

func parseChannelsParams(requestPath string) (ChannelsParams, bool) {
	_, ok := router.MatchPathPattern("/channels", requestPath)
	if !ok {
		return ChannelsParams{}, false
	}
	return ChannelsParams{}, true
}

func parseMicroTalesParams(requestPath string) (MicroTalesParams, bool) {
	_, ok := router.MatchPathPattern("/micro-tales", requestPath)
	if !ok {
		return MicroTalesParams{}, false
	}
	return MicroTalesParams{}, true
}

func parseNoteParamSlugParams(requestPath string) (NoteParamSlugParams, bool) {
	params, ok := router.MatchPathPattern("/note/[slug]", requestPath)
	if !ok {
		return NoteParamSlugParams{}, false
	}
	out := NoteParamSlugParams{}
	SlugValue := strings.TrimSpace(params["slug"])
	if !router.IsValidSlug(SlugValue) {
		return NoteParamSlugParams{}, false
	}
	out.Slug = SlugValue
	return out, true
}

func parseTagParamSlugParams(requestPath string) (TagParamSlugParams, bool) {
	params, ok := router.MatchPathPattern("/tag/[slug]", requestPath)
	if !ok {
		return TagParamSlugParams{}, false
	}
	out := TagParamSlugParams{}
	SlugValue := strings.TrimSpace(params["slug"])
	if !router.IsValidSlug(SlugValue) {
		return TagParamSlugParams{}, false
	}
	out.Slug = SlugValue
	return out, true
}

func parseTalesParams(requestPath string) (TalesParams, bool) {
	_, ok := router.MatchPathPattern("/tales", requestPath)
	if !ok {
		return TalesParams{}, false
	}
	return TalesParams{}, true
}

func wrapAuthorParamSlugWithAuthorParamSlugLayout(view appcore.AuthorPageView, child templ.Component) templ.Component {
	return r_layout_author_param_slug.Layout(view, child)
}

func wrapAuthorParamSlugWithRootLayout(view appcore.AuthorPageView, child templ.Component) templ.Component {
	return r_layout_root.Layout(view, child)
}

func wrapChannelsWithRootLayout(view appcore.NotesPageView, child templ.Component) templ.Component {
	return r_layout_root.Layout(view, child)
}

func wrapMicroTalesWithRootLayout(view appcore.NotesPageView, child templ.Component) templ.Component {
	return r_layout_root.Layout(view, child)
}

func wrapNoteParamSlugWithRootLayout(view appcore.NotePageView, child templ.Component) templ.Component {
	return r_layout_root.Layout(view, child)
}

func wrapRootWithRootLayout(view appcore.NotesPageView, child templ.Component) templ.Component {
	return r_layout_root.Layout(view, child)
}

func wrapTagParamSlugWithRootLayout(view appcore.NotesPageView, child templ.Component) templ.Component {
	return r_layout_root.Layout(view, child)
}

func wrapTalesWithRootLayout(view appcore.NotesPageView, child templ.Component) templ.Component {
	return r_layout_root.Layout(view, child)
}
